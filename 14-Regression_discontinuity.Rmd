#	Alternatives to RCT: regression discontinuity

Before we delve into the regression discontinuity designs, it may be useful for us to first take a look at general linear models, in particular, ordinary linear regression. Linear models consist of some of the most commonly used methods in applied research including ANOVA, ANCOVA, linear regression, t-tests, F-tests and MANCOVA.

```{r linReg, echo=T, message=F, warning=F}
list_of_packages<-c("tidyverse","stats","ggpubr")
new.packages <- list_of_packages[!(list_of_packages %in% installed.packages()[,"Package"])]
if(length(new.packages))install.packages(new.packages,dependencies = TRUE)

library(tidyverse)
library(stats)
library(ggpubr)

#simulate some data based on a known structure

b0 = 0.1
b1=1.2
err<-rnorm(100,0,1)

x<-rnorm(100,0,1)
y<-b0+b1*x+err

data.lm <- data.frame(y=y,x=x)
mylm1 <- lm(y ~ x, data = data.lm)

data.lm$pred <- predict(mylm1)
data.lm$resid <- residuals(mylm1)

g1<-ggplot(data.lm, aes(x = x, y = y)) +
  geom_smooth(method = "lm", se = FALSE, color = "red") +
  geom_point(alpha = 0.2) +  # Alpha mapped to abs(residuals)
  guides(alpha = FALSE) + theme_bw()

g2<-ggplot(data.lm, aes(x = x, y = y)) +
  geom_smooth(method = "lm", se = FALSE, color = "red") +
  geom_segment(aes(xend = x, yend = pred), alpha = .2) +
  geom_point(aes(alpha = abs(resid))) +  # Alpha mapped to abs(residuals)
  guides(alpha = FALSE) + theme_bw()

ggarrange(g1,g2,nrow=1,ncol=2)

```

## Mediators

## Moderators

start with diagram as a simplest clear definition
